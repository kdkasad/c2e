<!doctype html>
<html lang="en" class="h-full">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="theme-color" content="#262626" />
        <title>C Declaration Explainer</title>
    </head>
    <body
        class="h-full overflow-hidden font-mono bg-neutral-800 text-neutral-400"
    >
        <div class="h-full flex flex-col">
            <!-- noscript warning -->
            <noscript class="w-full p-4 bg-red-300 text-neutral-900">
                <strong>Warning:</strong>
                This application requires JavaScript and WebAssembly (WASM) to
                function. You appear to have JavaScript disabled, so this site
                will not work.
            </noscript>

            <!-- Main Content Area (Split Screen) -->
            <main
                id="split-container"
                class="flex-1 flex flex-col lg:flex-row w-full"
            >
                <!-- Left Panel: Input -->
                <div
                    class="flex-1 p-4 sm:p-8 flex flex-col overflow-hidden border-b border-b-neutral-700 lg:border-b-0 lg:border-r lg:border-r-neutral-700"
                >
                    <div class="mb-4 flex items-center gap-2">
                        <label
                            for="code-input"
                            class="text-xs sm:text-sm font-semibold uppercase tracking-wider"
                        >
                            Input
                        </label>
                        <button
                            popovertarget="syntax-tooltip"
                            class="cursor-pointer"
                        >
                            <svg
                                class="size-4 md:size-5"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="lucide lucide-circle-question-mark-icon lucide-circle-question-mark"
                            >
                                <circle cx="12" cy="12" r="10" />
                                <path
                                    d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"
                                />
                                <path d="M12 17h.01" />
                            </svg>
                        </button>
                    </div>
                    <textarea
                        id="input"
                        class="flex-1 w-full sm:text-xl bg-transparent resize-none focus:outline-none text-neutral-200 disabled:text-neutral-400 placeholder-neutral-600"
                        placeholder="int *p"
                        spellcheck="false"
                        autocorrect="off"
                        autofocus
                    >
Loading JavaScript...</textarea
                    >
                </div>

                <!-- Right Panel: Output -->
                <div
                    class="flex-1 p-4 sm:p-8 flex flex-col bg-neutral-900 bg-opacity-10 overflow-hidden"
                >
                    <h2
                        class="mb-4 text-xs sm:text-sm font-semibold uppercase tracking-wider"
                    >
                        Explanation
                    </h2>
                    <div class="flex-1 overflow-y-auto">
                        <pre
                            id="output"
                            class="whitespace-pre-wrap text-neutral-300 sm:text-xl"
                        >
Loading JavaScript...</pre
                        >
                    </div>
                </div>
            </main>

            <!-- Attribution & version footer -->
            <footer
                class="lg:absolute lg:bottom-0 lg:left-0 lg:right-0 p-2 sm:p-4 text-xs sm:text-sm md:text-md border-t border-t-neutral-700 lg:border-none"
            >
                <a
                    href="https://github.com/kdkasad/c2e"
                    class="hover:underline flex flex-row justify-between gap-4"
                >
                    <span> Written in ðŸ¦€ Rust by Kian Kasad </span>
                    <span id="version"></span>
                </a>
            </footer>
            <div
                id="syntax-tooltip"
                role="tooltip"
                popover
                class="absolute top-[50vh] left-[50vw] -translate-x-1/2 -translate-y-1/2 text-sm sm:text-base backdrop:bg-neutral-900 backdrop:opacity-70 bg-neutral-900 text-neutral-400 p-4 border border-neutral-700 shadow-xl min-w-xs max-w-md max-h-4/5 overflow-y-auto"
            >
                <div class="flex flex-row items-center justify-between gap-4">
                    <h2 class="font-bold text-sm uppercase text-neutral-300">
                        Syntax guide
                    </h2>
                    <button
                        popovertarget="syntax-tooltip"
                        popoveraction="close"
                        class="size-4 cursor-pointer"
                    >
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="lucide lucide-x-icon lucide-x"
                        >
                            <path d="M18 6 6 18" />
                            <path d="m6 6 12 12" />
                        </svg>
                    </button>
                </div>
                <p class="mt-3">
                    Enter C variable/function/typedef declarations (<strong
                        >not definitions</strong
                    >) to get an explanation of what they mean. Multiple
                    declarations can be entered at once, separated by
                    semicolons.
                </p>
                <p class="mt-3">
                    Since this tool just parses the declarations and isn't a
                    full compiler, it may accept some syntax that isn't valid in
                    a real C program. For example, it will accept
                    <code>typedef</code> declarations without a name, which is
                    not valid in C.
                </p>
                <p class="mt-3">
                    If you encounter any issues, please
                    <a
                        class="underline"
                        href="https://github.com/kdkasad/c2e/issues/new"
                    >
                        report them in the GitHub repository</a
                    >.
                </p>
            </div>
        </div>
        <script type="module" src="/src/main.ts"></script>
    </body>
</html>
